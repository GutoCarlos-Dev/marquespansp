<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/dashboard.css" />
</head>
<body>
    <header>
        <nav>
            <h1>Dashboard</h1>
            <div id="menu"><!-- Menu será carregado dinamicamente pelo app.js --></div>
        </nav>
    </header>
    <main>
        <div class="dashboard-header">
            <h2>Bem-vindo, <span id="nome-usuario"></span>!</h2>
            <p>Aqui está um resumo da sua atividade recente e do status das solicitações.</p>
        </div>
        
        <!-- Container principal do Dashboard -->
        <div id="dashboard-container">
            <!-- Cards de Resumo -->
            <div id="summary-cards" class="summary-cards">
                <!-- Cards serão gerados pelo JS -->
            </div>

            <!-- Gráficos -->
            <div id="charts-container" class="charts-container">
                <div class="chart-card">
                    <h3>Status das Solicitações</h3>
                    <div class="chart-wrapper">
                        <canvas id="status-chart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3 id="bar-chart-title">Visão Geral</h3>
                    <div class="chart-wrapper">
                        <canvas id="bar-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Grid de Atividade Recente -->
            <div id="recent-activity-grid" class="recent-activity-grid">
                <h3>Atividade Recente</h3>
                <table id="tabela-recente">
                    <thead></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Seção de Migração visível apenas para Administrador -->
        <div id="migration-section" style="display: none; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #eee;">
            <h3>Migração para Supabase</h3>
            <div class="admin-actions">
                <button id="btn-migrar-usuarios" title="Passo 1: Migra os usuários e senhas para o sistema de autenticação.">1. Migrar Usuários</button>
                <button id="btn-migrar-pecas" title="Passo 2: Migra o cadastro de peças.">2. Migrar Peças</button>
                <button id="btn-migrar-veiculos" title="Passo 3: Migra o cadastro de veículos e seus vínculos.">3. Migrar Veículos</button>
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/dashboard.js"></script>
    <script src="../js/migration.js"></script>
</body>
</html>
